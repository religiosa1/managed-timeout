var v=(n,e,i)=>{if(!e.has(n))throw TypeError("Cannot "+i)};var t=(n,e,i)=>(v(n,e,"read from private field"),i?i.call(n):e.get(n)),a=(n,e,i)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,i)},s=(n,e,i,o)=>(v(n,e,"write to private field"),o?o.call(n,i):e.set(n,i),i);var l=(n,e,i)=>(v(n,e,"access private method"),i);var w=class extends Error{constructor(i="The operation was aborted."){super(i);this.name="AbortError";this.code=20}};var P="Expeting to get a cb function as the first argument",y="Delay argument should be a number >= 0",S="Timeout was already started",r,h,u,d,p,m,b,f,g,c,T,x=class{constructor(e,i){a(this,f);a(this,c);a(this,r,"ready");a(this,h,void 0);a(this,u,void 0);a(this,d,void 0);a(this,p,void 0);a(this,m,null);a(this,b,null);let o=typeof e=="number"?e:i;if(typeof o!="number"||!Number.isInteger(o)||o<0)throw new Error(y);s(this,h,o),s(this,u,o),typeof e!="number"&&this.start(e)}get state(){return t(this,r)}get isPending(){return t(this,r)==="pending"||t(this,r)==="paused"}get isStarted(){return t(this,p)!=null}get isCanceled(){return t(this,r)==="cancelled"}get isFinished(){return t(this,r)==="resolved"}get isFinishedPreemptively(){return t(this,r)==="resolved"&&t(this,u)>0}get timeLeft(){var e;return t(this,r)!=="pending"?t(this,u):t(this,h)-(new Date().getTime()-((e=t(this,p))!=null?e:0))}get timePassed(){return t(this,h)-this.timeLeft}start(e){if(e!=null){if(typeof e!="function")throw new Error(P);return this.isPending?!1:(s(this,m,e),s(this,b,null),l(this,f,g).call(this),!0)}else return new Promise((i,o)=>{if(this.isPending)return o(new Error(S));s(this,m,()=>i(this)),s(this,b,E=>o(E)),l(this,f,g).call(this)})}cancel(){var e;return t(this,r)!=="pending"&&t(this,r)!=="paused"?!1:(l(this,c,T).call(this),s(this,r,"cancelled"),(e=t(this,b))==null||e.call(this,new w),!0)}execute(){var e;return t(this,r)==="resolved"||this.state==="cancelled"?!1:(l(this,c,T).call(this),s(this,r,"resolved"),(e=t(this,m))==null||e.call(this,this),!0)}pause(){return t(this,r)!=="pending"?!1:(l(this,c,T).call(this),s(this,r,"paused"),!0)}resume(){return t(this,r)!=="paused"?!1:(l(this,f,g).call(this),!0)}get paused(){return t(this,r)==="paused"}set paused(e){e?this.pause():this.resume()}reset(e){if(e==null&&(e=t(this,h)),typeof e!="number"||e<0)throw new Error(y);if(this.isStarted){if(!this.isPending)return!1;l(this,c,T).call(this),s(this,h,e),s(this,u,e),l(this,f,g).call(this)}else s(this,h,e),s(this,u,e);return!0}get delay(){return t(this,h)}};r=new WeakMap,h=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,m=new WeakMap,b=new WeakMap,f=new WeakSet,g=function(){s(this,p,new Date().getTime()),s(this,r,"pending"),s(this,d,setTimeout(()=>{var e;s(this,d,null),s(this,r,"resolved"),s(this,u,0),(e=t(this,m))==null||e.call(this,this)},t(this,u)))},c=new WeakSet,T=function(){t(this,d)&&(clearTimeout(t(this,d)),s(this,d,null)),s(this,u,this.timeLeft)};var F=x;export{x as Timeout,P as callbackError,F as default,y as delayError,S as repeatedStart};
//# sourceMappingURL=timeout.mjs.map