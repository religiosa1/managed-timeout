var T=(r,e,n)=>{if(!e.has(r))throw TypeError("Cannot "+n)};var t=(r,e,n)=>(T(r,e,"read from private field"),n?n.call(r):e.get(r)),a=(r,e,n)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,n)},s=(r,e,n,h)=>(T(r,e,"write to private field"),h?h.call(r,n):e.set(r,n),n);var l=(r,e,n)=>(T(r,e,"access private method"),n);var P="Expeting to get a cb function as the first argument",w="Delay argument should be a number >= 0",x="Timeout was already started",i,u,o,m,p,d,f,c,b,g,v=class{constructor(e,n){a(this,f);a(this,b);a(this,i,"ready");a(this,u,void 0);a(this,o,void 0);a(this,m,void 0);a(this,p,void 0);a(this,d,void 0);let h=typeof e=="number"?e:n;if(!Number.isInteger(h)||h<0)throw new Error(w);s(this,u,h),s(this,o,h),typeof e!="number"&&this.start(e)}get state(){return t(this,i)}get isPending(){return t(this,i)==="pending"||t(this,i)==="paused"}get isStarted(){return t(this,p)!=null}get isCanceled(){return t(this,i)==="cancelled"}get isFinished(){return t(this,i)==="resolved"}get isFinishedPreemptively(){return t(this,i)==="resolved"&&t(this,o)>0}get timeLeft(){return t(this,i)!=="pending"?t(this,o):t(this,u)-(new Date().getTime()-t(this,p))}get timePassed(){return t(this,u)-this.timeLeft}start(e){if(e!=null){if(typeof e!="function")throw new Error(P);return this.isPending?!1:(s(this,d,e),l(this,f,c).call(this),!0)}else return new Promise((n,h)=>{if(this.isPending)return h(new Error(x));s(this,d,()=>n(this)),l(this,f,c).call(this)})}cancel(){return t(this,i)!=="pending"&&t(this,i)!=="paused"?!1:(l(this,b,g).call(this),s(this,i,"cancelled"),!0)}execute(){var e;return t(this,i)==="resolved"&&this.state==="cancelled"?!1:(l(this,b,g).call(this),s(this,i,"resolved"),(e=t(this,d))==null||e.call(this,this),!0)}pause(){return t(this,i)!=="pending"?!1:(l(this,b,g).call(this),s(this,i,"paused"),!0)}resume(){return t(this,i)!=="paused"?!1:(l(this,f,c).call(this),!0)}get paused(){return t(this,i)==="paused"}set paused(e){e?this.pause():this.resume()}reset(e){if(e==null&&(e=t(this,u)),typeof e!="number"||e<0)throw new Error(w);if(this.isStarted){if(!this.isPending)return!1;l(this,b,g).call(this),s(this,u,e),s(this,o,e),l(this,f,c).call(this)}else s(this,u,e),s(this,o,e);return!0}get delay(){return t(this,u)}};i=new WeakMap,u=new WeakMap,o=new WeakMap,m=new WeakMap,p=new WeakMap,d=new WeakMap,f=new WeakSet,c=function(){s(this,p,new Date().getTime()),s(this,i,"pending"),s(this,m,setTimeout(()=>{s(this,m,null),s(this,i,"resolved"),s(this,o,0),t(this,d).call(this,this)},t(this,o)))},b=new WeakSet,g=function(){t(this,m)&&(clearTimeout(t(this,m)),s(this,m,null)),s(this,o,this.timeLeft)};var y=v;export{v as Timeout,P as callbackError,y as default,w as delayError,x as repeatedStart};
//# sourceMappingURL=timeout.mjs.map